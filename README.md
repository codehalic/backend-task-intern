# تسک: ساخت سرویس کوتاه کننده لینک با استفاده از .NET



### توضیحات کلی

هدف از این تسک، طراحی و پیاده‌سازی یک سرویس وب (API) برای کوتاه کردن لینک‌ها (URL Shortener) با استفاده از پلتفرم .NET است. این سرویس باید بتواند یک URL طولانی را از کاربر دریافت کرده و یک لینک کوتاه منحصر به فرد به او تحویل دهد. سپس با فراخوانی لینک کوتاه، کاربر باید به صورت خودکار به URL اصلی هدایت (Redirect) شود.

---

### نیازمندی‌های اصلی (Functional Requirements)

1.  **کوتاه کردن لینک:**
    * باید یک Endpoint از نوع `POST` (مثلاً `/api/shorten`) وجود داشته باشد.
    * این Endpoint یک آبجکت JSON حاوی URL اصلی و طولانی را دریافت می‌کند (`{ "longUrl": "https://..." }`).
    * سرویس باید یک کد کوتاه منحصر به فرد (مثلاً `aB3xY7`) تولید کند.
    * در پاسخ، لینک کوتاه شده کامل را برمی‌گرداند (مثلاً `https://your-domain.com/aB3xY7`).

2.  **هدایت (Redirect) به لینک اصلی:**
    * باید یک Endpoint از نوع `GET` (مثلاً `/{shortCode}`) وجود داشته باشد که کد کوتاه را از مسیر URL دریافت می‌کند.
    * اگر کد کوتاه در سیستم موجود بود، کاربر باید با یک `HTTP 302 Found` یا `HTTP 301 Moved Permanently` به لینک اصلی هدایت شود.
    * اگر کد کوتاه موجود نبود، باید خطای `HTTP 404 Not Found` بازگردانده شود.

3.  **اعتبارسنجی ورودی:**
    * URL ورودی برای کوتاه شدن باید یک URL معتبر باشد. در غیر این صورت، خطای `HTTP 400 Bad Request` برگردانده شود.

---

### نیازمندی‌های فنی (Non-Functional Requirements)

* **تکنولوژی:**
    * استفاده از آخرین نسخه پایدار **.NET (مثلاً .NET 8)**.
    * پروژه باید به صورت **ASP.NET Core Web API** پیاده‌سازی شود.
* **پایگاه داده:**
    * استفاده از **Entity Framework Core** برای ارتباط با دیتابیس.
    * نوع دیتابیس به انتخاب شماست (SQLite, SQL Server, PostgreSQL). استفاده از In-Memory Database برای سادگی نیز قابل قبول است.
* **معماری:**
    * کد باید تمیز، خوانا و با رعایت اصول SOLID نوشته شود. استفاده از معماری لایه‌ای (مانند Controller, Service, Repository) امتیاز محسوب می‌شود.
* **مدیریت خطا:**
    * سرویس باید به درستی کدهای وضعیت HTTP را برای سناریوهای مختلف (موفقیت، خطا، پیدا نشدن) برگرداند.

---

### خروجی‌های مورد انتظار (Deliverables)

* لینک یک ریپازیتوری Git (مانند GitHub یا GitLab) حاوی سورس کامل پروژه.
* یک فایل `README.md` که در آن روش راه‌اندازی و اجرای پروژه به طور کامل توضیح داده شده باشد.
* (اختیاری) یک Postman Collection برای تست راحت Endpoint ها.

---

### بخش امتیازی (Bonus) - چالش ضد هوش مصنوعی

برای دریافت امتیاز کامل این بخش، الگوریتم تولید کد کوتاه شما **نباید** بر اساس یک شناسه عددی افزایشی (Auto-increment ID) از دیتابیس و تبدیل آن به مبنای خاصی (مانند Base62 یا Base64) باشد. این روش، رایج‌ترین و ساده‌ترین پیاده‌سازی است که ابزارهای هوش مصنوعی فوراً آن را تولید می‌کنند.

**چالش اصلی:**
شما باید یک الگوریتم جایگزین برای تولید کدهای کوتاه **غیرقابل پیش‌بینی و غیر ترتیبی (Non-sequential)** پیاده‌سازی کنید.

**الزامات بخش امتیازی:**

1.  **الگوریتم جایگزین:** یک روش متفاوت برای تولید کد کوتاه پیاده‌سازی کنید. چند ایده برای شروع:
    * تولید یک رشته تصادفی و بررسی یکتا بودن آن در دیتابیس.
    * هش کردن URL اصلی به همراه یک مقدار "salt" و استخراج بخشی از هش به عنوان کد کوتاه.
    * استفاده از الگوریتم‌های دیگر برای تولید کدهای منحصر به فرد.

2.  **مدیریت تصادم (Collision Handling):** الگوریتم شما باید بتواند شرایطی را مدیریت کند که یک کد تکراری تولید می‌شود. برای مثال، اگر رشته تصادفی تولید شده از قبل در دیتابیس وجود داشت، سیستم شما چه واکنشی نشان می‌دهد؟

3.  **توضیح و توجیه:** در فایل `README.md` پروژه، یک بخش جداگانه با عنوان **"الگوریتم تولید کد کوتاه"** ایجاد کنید و در آن به طور خلاصه موارد زیر را توضیح دهید:
    * روشی که انتخاب کرده‌اید چیست؟
    * مزایا و معایب این روش نسبت به روش رایج (مبتنی بر ID) چیست؟
    * چگونه مشکل "تصادم" یا تولید کدهای تکراری را مدیریت کرده‌اید؟
